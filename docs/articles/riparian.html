<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>riparian • riparian</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="riparian">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">riparian</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/riparian.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>riparian</h1>
                        <h4 class="author">Erik Rose</h4>
            
            <h4 class="date">2019-05-02</h4>
      
      
      <div class="hidden name"><code>riparian.Rmd</code></div>

    </div>

    
    
<p>Welcome to the <code>vignette</code> for the package <code>riparian</code>, a suite of tools designed to help Benton County Community Development staff analyze riparian cover extent and change in cover over time. This document models the workflow of producing an annual monitoring report for the SRP program, and demonstrates how functions in the <code>riparian</code> package can make monitoring faster and more efficient for the researcher.</p>
<div id="step-one-site-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#step-one-site-plots" class="anchor"></a>Step One: Site Plots</h2>
<p>Benton County conducts riparian monitoring whenever new high resolution (1-foot) orthographic imagery becomes available. Likely, your bosses have hired you because new imagery has just arrived. In my year, the County collected collected imagery in S:/maps/OrthoPhotos, which each year of imagery in a separate folder. If you are planning on doing a lot of operations on large raster data, then I suggest copying the folder containing the imagery onto an external drive. This minimizes network traffic for others and speeds performance at your workstation.</p>
<p>The County currently monitors 54 randomly selected sites along priority corridors, and may add additional sites based upon future permit approvals. The reason we look at the same 54 sites every year is because we are trying to detect change in cover. If we looked at a different slew of sites each year, it would be hard to know whether an increase or decrease in cover were due to variation between the sites we selected, or whether vegetation removal or accrual occurred. Using this method, we can circle individual trees that have gone missing from one year to the next. Because the sites are randomly selected and representative of conditions in the priority corridor generally, we can be reasonably confident that changes in cover within the sample reflect conditions in the priority corridor.</p>
<p>Acces the polygon shapefile containing the 54 sampling boxes for each site by calling the command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(samples, <span class="dt">package =</span> <span class="st">'riparian'</span>)

<span class="co"># use the raster package to plot spatial data</span>
raster<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(samples[<span class="dv">1</span>,], <span class="dt">main =</span> <span class="st">'Example Sampling Box'</span>)</code></pre></div>
<p><img src="riparian_files/figure-html/unnamed-chunk-1-1.png" width="700"></p>
<p>The function for printing plots of sample sites using new orthographic imagery is called <code><a href="../reference/plot_samples.html">plot_samples()</a></code>, and it takes three main arguments. The first argument is called <code>in_path</code> and it is the path to the directory of orthographic imagery. R uses the convention of forward slashes in path names (for instance the path to my working folder for this project is ‘E:/Riparian’ and the path to the 2018 imagery is ‘E:/ortho2018’). The function expects a character string, so the path name needs to have single or double quotes around it. The second argument is <code>out_path</code>, and specifies where the function will print the sample plots into. The third argument, <code>samples</code> is the polygon shapefile of sampling boxes. By default the function looks for an object called <code>samples</code> in the current environment, so if you have loaded the data <code>samples</code>, then you can omit the third argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(riparian)

<span class="co"># not run</span>
<span class="co"># change the path names to use</span>
<span class="kw"><a href="../reference/plot_samples.html">plot_samples</a></span>(<span class="dt">in_path =</span> <span class="st">'E:/ortho2018'</span>,
             <span class="dt">out_path =</span><span class="st">'E:/Riparian/sites2018'</span>)</code></pre></div>
<p><img src=""><!-- --></p>
<p>The function <code><a href="../reference/plot_samples.html">plot_samples()</a></code> has additional optional arguments. By default it will print an RGB plot and an NDVI plot for each site. You can turn off one or the other by setting <code>print_rgb</code> or <code>print_ndvi</code> to FALSE, depicted below.</p>
<p>If you have a new polygon object, perhaps as the result of generating new sampling sites, then set the argument <code>samples</code> to the polygon object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># not run</span>

<span class="co"># prints rgb only</span>
<span class="kw"><a href="../reference/plot_samples.html">plot_samples</a></span>(<span class="st">'E:/ortho2018'</span>, <span class="st">'E:/Riparian/sites2018'</span>, <span class="dt">print_ndvi =</span> <span class="ot">FALSE</span>)

<span class="co"># prints ndvi only</span>
<span class="kw"><a href="../reference/plot_samples.html">plot_samples</a></span>(<span class="st">'E:/ortho2018'</span>, <span class="st">'E:/Riparian/sites2018'</span>, <span class="dt">print_rgb =</span> F)

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(rgdal)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/getwd">setwd</a></span>(<span class="st">'path_to_shapefile'</span>)
polys &lt;-<span class="st"> </span><span class="kw">readOGR</span>(<span class="st">'mysamples.shp'</span>)

<span class="kw"><a href="../reference/plot_samples.html">plot_samples</a></span>(<span class="st">'E:/ortho2018'</span>, <span class="st">'E:/Riparian/sites2018'</span>, <span class="dt">samples =</span> polys)</code></pre></div>
</div>
<div id="scoring-samples" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-samples" class="anchor"></a>Scoring Samples</h2>
<p>Once you have printed sampling plots for all sites, it is time to score cover extent.</p>
<p>In 2018 I created an excel file called <code>samples2018.xlsx</code> to record cover extent for the 2018 annual monitoring report and the 5-year trends and status report. In order for the functions in <code>riparian</code> to work correctly, it is important for you to format your record of observations exactly like the spreadsheet from 2018. First, let’s take a look at that spreadsheet by loading it into the workspace. The file is located in the extdata folder in csv format.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(data.table)

<span class="co"># construct the file path to csv</span>
csv_path &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">'extdata'</span>, <span class="st">'samples2018.csv'</span>, <span class="dt">package =</span> <span class="st">'riparian'</span>)

<span class="co"># read the csv in as a data.table</span>
obs &lt;-<span class="st"> </span><span class="kw">fread</span>(csv_path)

<span class="co"># examine results</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(obs)</code></pre></div>
<p>You can also examine the data as a native R object, using the <code>data</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(samples2018, <span class="dt">package =</span> <span class="st">'riparian'</span>)

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(samples2018)
<span class="co">#&gt;  [1] "id"   "year" "type" "1"    "2"    "3"    "4"    "5"    "6"    "7"   </span>
<span class="co">#&gt; [11] "8"    "9"    "10"   "11"   "12"   "13"   "14"   "15"   "16"   "17"  </span>
<span class="co">#&gt; [21] "18"   "19"   "20"   "21"   "22"   "23"   "24"   "25"   "26"   "27"  </span>
<span class="co">#&gt; [31] "28"   "29"   "30"   "31"   "32"   "33"   "34"   "35"   "36"   "37"  </span>
<span class="co">#&gt; [41] "38"   "39"   "40"   "41"   "42"   "43"   "44"   "45"   "46"   "47"  </span>
<span class="co">#&gt; [51] "48"   "49"   "50"</span></code></pre></div>
<p>The spreadsheet has 53 columns, named <code>id</code>, <code>year</code>, <code>type</code> and then numbered 1:50. Your spreadsheet must adhere to this format, using 53 columns named just so. The <code>id</code> column refers to an individual site id assoiated with each site. The <code>year</code> column specifies the year of observation. The <code>type</code> column is for grouping sites into subsets, such as sites with active permits to track compared to random samples, and may be left blank without consequence. The columns numbered 1:50 correspond to the numbers on the sample plots printed by <code><a href="../reference/plot_samples.html">plot_samples()</a></code>. When you are scoring observations, enter the cover score associated with the number on the sampling plot under the column with the same number in the spreadsheet.</p>
<p>The easiest way to adhere to the format requirement is to simply add new observations to the bottom of the 2018 spreadsheet, and save it under a new name. You can convert the R object into a csv file using the command <code><a href="https://www.rdocumentation.org/packages/utils/topics/write.table">write.csv(samples2018, 'myfile.csv')</a></code> and fill in your observations using Excel.</p>
<p>When you are done editing your file in Excel, export it into csv format, which is a tried and true way to share data between programs. Read the csv into RStudio using the <code>data.table</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># not run</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(data.table)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/getwd">setwd</a></span>(<span class="st">'path_to_file'</span>)

obs &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">'myobs.csv'</span>)</code></pre></div>
<div id="subsetting-sites" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-sites" class="anchor"></a>Subsetting Sites</h3>
<p>The <code>riparian</code> package takes advantage of several features of the <code>data.table</code> package. The <code>data.table</code> is a special class of <code>data.frame</code>, with unique syntax for subsetting data.</p>
<p>The first subsetting you will likely want to do is subset by year. Do this by selecting the column <code>year</code> and setting it equal to the target value. Place this logical test in brackets following the data.table name, and R will return only those observations that pass the test. Note that logical tests use two equal signs (eg. <code>year == 2018</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(data.table)
<span class="co"># print summary table of obs by year</span>
samples2018[ , .N, by =<span class="st"> </span>year]
<span class="co">#&gt;    year   N</span>
<span class="co">#&gt; 1: 2018 170</span>
<span class="co">#&gt; 2: 2016 169</span>
<span class="co">#&gt; 3: 2009  54</span>

<span class="co"># subset year of interst</span>
sub18 &lt;-<span class="st"> </span>samples2018[year <span class="op">==</span><span class="st"> </span><span class="dv">2018</span>]

<span class="co"># very subset is correct</span>
sub18[ , .N, by =<span class="st"> </span>year]
<span class="co">#&gt;    year   N</span>
<span class="co">#&gt; 1: 2018 170</span></code></pre></div>
<p>The <code>type</code> variable is a catch-all for you to define and compare groups within the sample. The 2018 dataset includes a type value <code>permit</code>, which refers to sites with active permits we selected for random monitoring. We can split the dataset into two groups by using <code>==</code> and <code>!=</code> (not equal) to divide the data by <code>type</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print table of obs by type</span>
samples2018[ , .N, by =<span class="st"> </span>type]
<span class="co">#&gt;      type   N</span>
<span class="co">#&gt; 1: random  27</span>
<span class="co">#&gt; 2:   trib 231</span>
<span class="co">#&gt; 3: permit 135</span>

<span class="co"># subset permit and nopermit sites</span>
permit_sites &lt;-<span class="st"> </span>samples2018[type <span class="op">==</span><span class="st"> 'permit'</span>]
nopermit_sites &lt;-<span class="st"> </span>samples2018[type <span class="op">!=</span><span class="st"> 'permit'</span>]

<span class="co"># examine results</span>
permit_sites[ , .N, by =<span class="st"> </span>type]
<span class="co">#&gt;      type   N</span>
<span class="co">#&gt; 1: permit 135</span>
nopermit_sites[ , .N, by =<span class="st"> </span>type]
<span class="co">#&gt;      type   N</span>
<span class="co">#&gt; 1: random  27</span>
<span class="co">#&gt; 2:   trib 231</span></code></pre></div>
<p>To subset by multiples criteria, you can subset sequentially or use logical operators <code>&amp;</code> and <code>|</code> to nest multiple logical tests.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># subset 2018 sites with type trib or permit</span>
sub &lt;-<span class="st"> </span>samples2018[year <span class="op">==</span><span class="st"> </span><span class="dv">2018</span>]
sub &lt;-<span class="st"> </span>sub[type <span class="op">==</span><span class="st"> 'trib'</span> <span class="op">|</span><span class="st"> </span>type <span class="op">==</span><span class="st"> 'permit'</span>]

<span class="co"># very subset has correct number of obs</span>
sub[, .N, by =<span class="st"> </span>type]
<span class="co">#&gt;      type   N</span>
<span class="co">#&gt; 1:   trib 116</span>
<span class="co">#&gt; 2: permit  50</span>

<span class="co"># subset 2016 sites with type trib or permit</span>
sub &lt;-<span class="st"> </span>samples2018[year <span class="op">==</span><span class="st"> </span><span class="dv">2016</span>]
sub &lt;-<span class="st"> </span>sub[type <span class="op">==</span><span class="st"> 'trib'</span> <span class="op">|</span><span class="st"> </span>type <span class="op">==</span><span class="st"> 'permit'</span>]

<span class="co"># very subset has correct number of obs</span>
sub[, .N, by =<span class="st"> </span>.(year, type)]
<span class="co">#&gt;    year   type   N</span>
<span class="co">#&gt; 1: 2016   trib 115</span>
<span class="co">#&gt; 2: 2016 permit  50</span></code></pre></div>
</div>
</div>
<div id="plot-cover-extent" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-cover-extent" class="anchor"></a>Plot Cover Extent</h2>
<p>The function <code><a href="../reference/plot_cover.html">plot_cover(csv)</a></code> produces a plot of cover extent over all the samples in the object <code>csv</code>. To produce a plot of cover extent for a given year, subset the observations in the data.table() by year in the argument to <code><a href="../reference/plot_cover.html">plot_cover()</a></code>. Optional arguments: the argument <code>title</code> sets the name of the .png file printed into the working directory. The argument <code>heading</code> sets a title for the plot (default is blank). The argument <code>leg_pos</code> adjusts the legend position and accepts the arguments <code>topright</code>, <code>topleft</code>, <code>bottomright</code>, <code>bottomleft</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(riparian)
<span class="co">#&gt; Warning: replacing previous import 'magrittr::extract' by 'raster::extract'</span>
<span class="co">#&gt; when loading 'riparian'</span>
<span class="co">#&gt; Warning: replacing previous import 'data.table::shift' by 'raster::shift'</span>
<span class="co">#&gt; when loading 'riparian'</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'riparian'</span>
<span class="co">#&gt; The following object is masked _by_ '.GlobalEnv':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     samples2018</span>
<span class="kw"><a href="../reference/plot_cover.html">plot_cover</a></span>(samples2018[year <span class="op">==</span><span class="st"> </span><span class="dv">2018</span>])
<span class="co">#&gt;           mean        sd   n       upr       lwr</span>
<span class="co">#&gt; [1,] 0.7319412 0.3300731 170 0.7815595 0.6823229</span>
<span class="kw"><a href="../reference/plot_cover.html">plot_cover</a></span>(samples2018[year <span class="op">==</span><span class="st"> </span><span class="dv">2009</span>])
<span class="co">#&gt;           mean        sd  n       upr       lwr</span>
<span class="co">#&gt; [1,] 0.8172222 0.2556192 54 0.8854016 0.7490429</span>
<span class="kw"><a href="../reference/plot_cover.html">plot_cover</a></span>(samples2018[year <span class="op">==</span><span class="st"> </span><span class="dv">2018</span> <span class="op">&amp;</span><span class="st"> </span>type <span class="op">!=</span><span class="st"> 'trib'</span>])
<span class="co">#&gt;           mean        sd  n       upr       lwr</span>
<span class="co">#&gt; [1,] 0.8416667 0.2417917 54 0.9061579 0.7771755</span></code></pre></div>
</div>
<div id="plot-cover-change" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-cover-change" class="anchor"></a>Plot Cover Change</h2>
<p>The function <code><a href="../reference/plot_change.html">plot_change(csv, year1, year2)</a></code> produces a plot of cover extent change from <code>year1</code> to <code>year2</code> across samples in <code>csv</code>. Here the function does the subsetting for you in the case of year, but you can still subset <code>csv</code> by type. The optional arguments are the same as for <code>plot_cover</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_change.html">plot_change</a></span>(samples2018, <span class="dv">2016</span>, <span class="dv">2018</span>)
<span class="co">#&gt;             mean         sd   n         upr        lwr</span>
<span class="co">#&gt; [1,] -0.01047619 0.09416389 168 0.003763017 -0.0247154</span>
<span class="kw"><a href="../reference/plot_change.html">plot_change</a></span>(samples2018[type <span class="op">!=</span><span class="st"> 'trib'</span>], <span class="dv">2016</span>, <span class="dv">2018</span>)
<span class="co">#&gt;              mean         sd  n        upr         lwr</span>
<span class="co">#&gt; [1,] -0.002962963 0.06778517 54 0.01511685 -0.02104277</span>
<span class="kw"><a href="../reference/plot_change.html">plot_change</a></span>(samples2018, <span class="dv">2009</span>, <span class="dv">2016</span>)
<span class="co">#&gt;            mean         sd  n        upr        lwr</span>
<span class="co">#&gt; [1,] 0.02740741 0.05857378 54 0.04303034 0.01178448</span></code></pre></div>
</div>
<div id="clean-permit-list" class="section level2">
<h2 class="hasAnchor">
<a href="#clean-permit-list" class="anchor"></a>Clean Permit List</h2>
<p>A staff member from the planning department will email you an Excel sheet containing all permits the County has issued since the last monitoring report. Reading the file into R will require a little extra work preparing the data in Excel. Open the permit list in Excel, and note that the first column should be <code>Record Number</code> and the fifth should read <code>MapTaxlot #</code>. Likely, many of the MapTaxlot numbers will be printed in scientific notation in their cells. That is a problem, because R will interpret the cells as character vectors, and the ending 7 digits of the MapTaxlot number will be lost. But first, scroll down and note the first cell where the MapTaxlot number has a little green triangle in the upper left corner. In order to avoid MapTaxlot numbers displaying in scientific notation, some planning staff display numbers as text in the Excel formatting options. This is problematic because Excel converts them back to numbers and hence to scientific notation when exporting the file in csv format, and R then interprets it as a character string again.</p>
<p>Click on the first cell where a MapTaxlot number has the green triangle in the upper left corner, then scroll to the last permit on the sheet and click on its MapTaxlot number while holding the shift key so that you select the entire column below the cell with the green triangle. Scroll back to the first cell you selected and click on the yellow exclamation point, bringing down a dropdown menu. From the menu select <code>Convert to Number</code>, and watch all the numbers displayed as text revert to scientific notation.</p>
<p>Now scroll to the top of the sheet and select the whole column for <code>MapTaxlot #</code>. Right click on a cell in the highlighted column and click on <code>Format Cells...</code>. The <code>number</code> tab should display. Select from the <code>Category</code> menu <code>Number</code>. Change <code>Decimal places</code> from 2 to 0. Click <code>OK</code>. With all MapTaxlot numbers converted to number strings and displayed as integers, it is now safe to export the sheet as a csv file to import into R. Select <code>Save As</code>, choose a directory, and from the <code>Save as type</code> menu select <code>CSV (Comma delimited)</code>.</p>
<p>Read the <code>csv</code> file into R using the same <code>fread</code> command as for the cover score sheet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># not run</span>
perms &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">'mypermits.csv'</span>)</code></pre></div>
<p>To demonstrate the functionality of the package, I have included a list of permits from 2013 to 2018 as a data object, which you can access using the <code>data</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(permits_13to18, <span class="dt">package =</span> <span class="st">'riparian'</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(permits_13to18)
<span class="co">#&gt;  [1] "record_no"         "record_type"       "proj_name"        </span>
<span class="co">#&gt;  [4] "description"       "maptaxlot"         "numer"            </span>
<span class="co">#&gt;  [7] "dir"               "street_name"       "street_type"      </span>
<span class="co">#&gt; [10] "post_dir"          "unit_no"           "city"             </span>
<span class="co">#&gt; [13] "status"            "related_records"   "opened"           </span>
<span class="co">#&gt; [16] "expires"           "balance"           "created_by"       </span>
<span class="co">#&gt; [19] "assigned_to_staff"</span></code></pre></div>
</div>
<div id="change-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#change-tables" class="anchor"></a>Change Tables</h2>
<p>The planning staff is concerned with which MapTaxlots have experienced net cover decrease, especially if the decrease is greater than 10%. The <code><a href="../reference/build_change_table.html">build_change_table()</a></code> function produces a change table designed for use by the planning staff. The change table ranks sampling sites by mean cover change, all MapTaxlot numbers falling within the sampling box and all permits associated with a MapTaxlot on the permit list.</p>
<p>The full syntax for the function is <code><a href="../reference/build_change_table.html">build_change_table(csv, year1, year2, polys, lots, permits)</a></code>. The argument <code>csv</code> is the record of cover scores for the sampling sites. The arguments <code>year1</code> and <code>year2</code> are integers matching values in the <code>year</code> column of <code>csv</code>. The argument <code>polys</code> is the spatial polygons object of samplings boxes. The argument <code>lots</code> is the polygons object of MapTaxlots, and <code>permits</code> is the permit list formatted according to the instructions in the previous section. The output is a csv file printed to the working directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/build_change_table.html">build_change_table</a></span>(<span class="dt">csv =</span> samples2018,
                   <span class="dt">year1 =</span> <span class="dv">2016</span>,
                   <span class="dt">year2 =</span> <span class="dv">2018</span>,
                   <span class="dt">polys =</span> samples,
                   <span class="dt">lots =</span> prc_lots, 
                   <span class="dt">permits =</span> permits_13to18)
<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>
<span class="co">#&gt; Loading required namespace: rgeos</span>
<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span>

<span class="co">#&gt; Warning in raster::crop(polys, so[i, ]): non identical CRS</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#step-one-site-plots">Step One: Site Plots</a></li>
      <li><a href="#scoring-samples">Scoring Samples</a></li>
      <li><a href="#plot-cover-extent">Plot Cover Extent</a></li>
      <li><a href="#plot-cover-change">Plot Cover Change</a></li>
      <li><a href="#clean-permit-list">Clean Permit List</a></li>
      <li><a href="#change-tables">Change Tables</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Erik Rose.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
